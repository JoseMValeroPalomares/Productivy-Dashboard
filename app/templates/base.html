<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Dashboard Productividad{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Hoja global -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" />

  <!-- Hoja para estilos propios del nav, con prioridad -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/nav.css') }}" />
  {% block extra_css %}{% endblock %}

  {# Si usas iconos FontAwesome para botones en navbar o formularios #}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" crossorigin="anonymous" />
  <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}">


</head>
<body>
  {# Navbar único aquí #}
  {% include "components/navbar.html" %}

  <main>
    {% block content %}
    {# Aquí va el contenido variable por página #}
    {% endblock %}
  </main>

  {# Opcional: zona donde mostrar el tip aleatorio, por ejemplo en footer o arriba #}
  {% if tip_aleatorio %}
    <footer class="tip-footer" aria-live="polite" aria-atomic="true">
      <p><strong>Consejo para hoy:</strong> {{ tip_aleatorio }}</p>
    </footer>
  {% endif %}

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  {% block extra_js %}{% endblock %}

  <script>
  // JavaScript para controlar el menú hamburguesa
  document.addEventListener('DOMContentLoaded', function() {
    const navToggle = document.getElementById('navToggle');
    const navLinks = document.getElementById('navLinks');

    if(navToggle && navLinks) {
      navToggle.addEventListener('click', function() {
        navLinks.classList.toggle('open');
        navToggle.classList.toggle('open');
      });

      navLinks.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          navLinks.classList.remove('open');
          navToggle.classList.remove('open');
        });
      });
    }
  });
  </script>

<!-- MINI ASISTENTE FLOTANTE -->
<div id="asistente-flotante" class="asistente-flotante cerrado" aria-live="polite" aria-atomic="true">
  <button id="boton-asistente" class="asistente-toggle" aria-label="Abrir asistente">
    <i class="fa fa-robot"></i>
  </button>
  <div class="asistente-ventana">
    <div class="asistente-header">
      <span class="asistente-titulo"><i class="fa fa-bell"></i> Notificaciones</span>
      <button id="cerrar-asistente" aria-label="Cerrar">&times;</button>
    </div>
    <div class="asistente-contenido" id="asistente-contenido">
      {% if notificaciones_asistente %}
        <ul>
          {% for notif in notificaciones_asistente %}
            <li>{{ notif }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No hay notificaciones por ahora.</p>
      {% endif %}
    </div>
  </div>
</div>


</body>
</html>
